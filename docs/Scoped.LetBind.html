<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Scoped.LetBind</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Scoped.LetBind.html" class="Module">Scoped.LetBind</a> <a id="23" class="Keyword">where</a>

<a id="30" class="Keyword">open</a> <a id="35" class="Keyword">import</a> <a id="42" href="Function.html" class="Module">Function</a>
<a id="51" class="Keyword">open</a> <a id="56" class="Keyword">import</a> <a id="63" href="Level.html" class="Module">Level</a>

<a id="70" class="Keyword">open</a> <a id="75" class="Keyword">import</a> <a id="82" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="91" class="Keyword">open</a> <a id="96" class="Keyword">import</a> <a id="103" href="Data.Product.html" class="Module">Data.Product</a>
<a id="116" class="Keyword">open</a> <a id="121" class="Keyword">import</a> <a id="128" href="Data.List.html" class="Module">Data.List</a>
<a id="138" class="Keyword">open</a> <a id="143" class="Keyword">import</a> <a id="150" href="Data.Unit.html" class="Module">Data.Unit</a>
<a id="160" class="Keyword">open</a> <a id="165" class="Keyword">import</a> <a id="172" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="181" class="Keyword">open</a> <a id="186" class="Keyword">import</a> <a id="193" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="204" class="Keyword">using</a> <a id="210" class="Symbol">(</a><a id="211" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="217" class="Symbol">;</a> <a id="219" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="224" class="Symbol">;</a> <a id="226" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="234" class="Symbol">;</a> <a id="236" href="Data.Maybe.Base.html#1381" class="Function">maybe</a><a id="241" class="Symbol">)</a>

<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Container.html" class="Module">Container</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Scoped.Prog.html" class="Module">Scoped.Prog</a>

<a id="291" class="Keyword">module</a> <a id="298" href="Scoped.LetBind.html#298" class="Module">_</a> <a id="300" class="Keyword">where</a>

  <a id="309" class="Keyword">open</a> <a id="314" href="Container.html#118" class="Module">Con</a>

  <a id="321" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="326" class="Symbol">=</a> <a id="328" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>

  <a id="333" href="Scoped.LetBind.html#333" class="Function">Env</a> <a id="337" class="Symbol">:</a> <a id="339" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="343" class="Symbol">→</a> <a id="345" href="Agda.Primitive.html#326" class="Primitive">Set</a>
  <a id="351" href="Scoped.LetBind.html#333" class="Function">Env</a> <a id="355" href="Scoped.LetBind.html#355" class="Bound">V</a> <a id="357" class="Symbol">=</a> <a id="359" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="364" class="Symbol">(</a><a id="365" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="370" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="372" href="Scoped.LetBind.html#355" class="Bound">V</a><a id="373" class="Symbol">)</a>

  <a id="378" class="Keyword">data</a> <a id="383" href="Scoped.LetBind.html#383" class="Datatype">FetchOp</a> <a id="391" class="Symbol">(</a><a id="392" href="Scoped.LetBind.html#392" class="Bound">V</a> <a id="394" class="Symbol">:</a> <a id="396" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="399" class="Symbol">)</a> <a id="401" class="Symbol">:</a> <a id="403" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="407" class="Keyword">where</a>
     <a id="418" href="Scoped.LetBind.html#418" class="InductiveConstructor">`fetch</a> <a id="425" class="Symbol">:</a> <a id="427" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="432" class="Symbol">→</a> <a id="434" href="Scoped.LetBind.html#383" class="Datatype">FetchOp</a> <a id="442" href="Scoped.LetBind.html#392" class="Bound">V</a>

  <a id="447" href="Scoped.LetBind.html#447" class="Function">FetchSig</a> <a id="456" class="Symbol">:</a> <a id="458" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="462" class="Symbol">→</a> <a id="464" href="Container.html#118" class="Record">Con</a>
  <a id="470" href="Container.html#166" class="Field">S</a> <a id="472" class="Symbol">(</a><a id="473" href="Scoped.LetBind.html#447" class="Function">FetchSig</a> <a id="482" href="Scoped.LetBind.html#482" class="Bound">V</a><a id="483" class="Symbol">)</a> <a id="485" class="Symbol">=</a> <a id="487" href="Scoped.LetBind.html#383" class="Datatype">FetchOp</a> <a id="495" href="Scoped.LetBind.html#482" class="Bound">V</a>
  <a id="499" href="Container.html#184" class="Field">P</a> <a id="501" class="Symbol">(</a><a id="502" href="Scoped.LetBind.html#447" class="Function">FetchSig</a> <a id="511" href="Scoped.LetBind.html#511" class="Bound">V</a><a id="512" class="Symbol">)</a> <a id="514" class="Symbol">(</a><a id="515" href="Scoped.LetBind.html#418" class="InductiveConstructor">`fetch</a> <a id="522" href="Scoped.LetBind.html#522" class="Bound">x</a><a id="523" class="Symbol">)</a> <a id="525" class="Symbol">=</a> <a id="527" href="Scoped.LetBind.html#511" class="Bound">V</a>

  <a id="532" class="Keyword">data</a> <a id="537" href="Scoped.LetBind.html#537" class="Datatype">LetScope</a> <a id="546" class="Symbol">(</a><a id="547" href="Scoped.LetBind.html#547" class="Bound">V</a> <a id="549" class="Symbol">:</a> <a id="551" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="554" class="Symbol">)</a> <a id="556" class="Symbol">:</a> <a id="558" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="562" class="Keyword">where</a>
     <a id="573" href="Scoped.LetBind.html#573" class="InductiveConstructor">`letbind</a> <a id="582" class="Symbol">:</a> <a id="584" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="589" class="Symbol">→</a> <a id="591" href="Scoped.LetBind.html#547" class="Bound">V</a> <a id="593" class="Symbol">→</a> <a id="595" href="Scoped.LetBind.html#537" class="Datatype">LetScope</a> <a id="604" href="Scoped.LetBind.html#547" class="Bound">V</a>

  <a id="609" href="Scoped.LetBind.html#609" class="Function">LetSig</a> <a id="616" class="Symbol">:</a> <a id="618" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="622" class="Symbol">→</a> <a id="624" href="Container.html#118" class="Record">Con</a>
  <a id="630" href="Container.html#166" class="Field">S</a> <a id="632" class="Symbol">(</a><a id="633" href="Scoped.LetBind.html#609" class="Function">LetSig</a> <a id="640" href="Scoped.LetBind.html#640" class="Bound">V</a><a id="641" class="Symbol">)</a> <a id="643" class="Symbol">=</a> <a id="645" href="Scoped.LetBind.html#537" class="Datatype">LetScope</a> <a id="654" href="Scoped.LetBind.html#640" class="Bound">V</a>
  <a id="658" href="Container.html#184" class="Field">P</a> <a id="660" class="Symbol">(</a><a id="661" href="Scoped.LetBind.html#609" class="Function">LetSig</a> <a id="668" href="Scoped.LetBind.html#668" class="Bound">V</a><a id="669" class="Symbol">)</a> <a id="671" class="Symbol">(</a><a id="672" href="Scoped.LetBind.html#573" class="InductiveConstructor">`letbind</a> <a id="681" href="Scoped.LetBind.html#681" class="Bound">n</a> <a id="683" href="Scoped.LetBind.html#683" class="Bound">v</a><a id="684" class="Symbol">)</a> <a id="686" class="Symbol">=</a> <a id="688" href="Agda.Builtin.Unit.html#164" class="Record">⊤</a>


<a id="692" class="Keyword">module</a> <a id="699" href="Scoped.LetBind.html#699" class="Module">_</a> <a id="701" class="Symbol">{</a><a id="702" href="Scoped.LetBind.html#702" class="Bound">V</a> <a id="704" class="Symbol">:</a> <a id="706" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="709" class="Symbol">}</a> <a id="711" class="Keyword">where</a> 

  <a id="721" class="Keyword">postulate</a>
    <a id="735" href="Scoped.LetBind.html#735" class="Postulate">lookupₐ</a> <a id="743" class="Symbol">:</a> <a id="745" class="Symbol">∀</a> <a id="747" class="Symbol">{</a><a id="748" href="Scoped.LetBind.html#748" class="Bound">X</a> <a id="750" class="Symbol">:</a> <a id="752" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="755" class="Symbol">}</a> <a id="757" class="Symbol">→</a> <a id="759" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="764" class="Symbol">(</a><a id="765" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="770" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="772" href="Scoped.LetBind.html#748" class="Bound">X</a><a id="773" class="Symbol">)</a> <a id="775" class="Symbol">→</a> <a id="777" href="Scoped.LetBind.html#321" class="Function">Name</a> <a id="782" class="Symbol">→</a> <a id="784" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="790" href="Scoped.LetBind.html#748" class="Bound">X</a>

  <a id="795" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="800" class="Symbol">:</a>  <a id="803" href="Scoped.LetBind.html#333" class="Function">Env</a> <a id="807" href="Scoped.LetBind.html#702" class="Bound">V</a> <a id="809" class="Symbol">→</a> <a id="811" href="Scoped.Prog.html#158" class="Datatype">Prog</a> <a id="816" class="Symbol">(</a><a id="817" href="Scoped.LetBind.html#447" class="Function">FetchSig</a> <a id="826" href="Scoped.LetBind.html#702" class="Bound">V</a> <a id="828" href="Container.html#624" class="Function Operator">∪</a> <a id="830" href="Scoped.Prog.html#126" class="Generalizable">σ</a><a id="831" class="Symbol">)</a> <a id="833" class="Symbol">(</a><a id="834" href="Scoped.LetBind.html#609" class="Function">LetSig</a> <a id="841" href="Scoped.LetBind.html#702" class="Bound">V</a> <a id="843" href="Container.html#624" class="Function Operator">∪</a> <a id="845" href="Scoped.Prog.html#134" class="Generalizable">γ</a><a id="846" class="Symbol">)</a> <a id="848" href="Container.html#394" class="Generalizable">A</a> <a id="850" class="Symbol">→</a>
          <a id="862" href="Scoped.Prog.html#158" class="Datatype">Prog</a> <a id="867" href="Scoped.Prog.html#126" class="Generalizable">σ</a> <a id="869" href="Scoped.Prog.html#134" class="Generalizable">γ</a> <a id="871" class="Symbol">(</a><a id="872" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="878" href="Container.html#394" class="Generalizable">A</a><a id="879" class="Symbol">)</a>
  <a id="883" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="888" class="Symbol">_</a> <a id="890" class="Symbol">(</a><a id="891" href="Scoped.Prog.html#202" class="InductiveConstructor">var</a> <a id="895" href="Scoped.LetBind.html#895" class="Bound">x</a><a id="896" class="Symbol">)</a> <a id="898" class="Symbol">=</a> <a id="900" href="Scoped.Prog.html#202" class="InductiveConstructor">var</a> <a id="904" class="Symbol">(</a><a id="905" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="910" href="Scoped.LetBind.html#895" class="Bound">x</a><a id="911" class="Symbol">)</a>
  <a id="915" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="920" href="Scoped.LetBind.html#920" class="Bound">E</a> <a id="922" class="Symbol">(</a><a id="923" href="Scoped.Prog.html#229" class="InductiveConstructor">op</a> <a id="926" class="Symbol">(</a><a id="927" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="932" class="Symbol">(</a><a id="933" href="Scoped.LetBind.html#418" class="InductiveConstructor">`fetch</a> <a id="940" href="Scoped.LetBind.html#940" class="Bound">x</a><a id="941" class="Symbol">))</a> <a id="944" href="Scoped.LetBind.html#944" class="Bound">k</a><a id="945" class="Symbol">)</a> <a id="947" class="Symbol">=</a>
     <a id="954" href="Data.Maybe.Base.html#1381" class="Function">maybe</a>  <a id="961" class="Symbol">(</a><a id="962" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="967" href="Scoped.LetBind.html#920" class="Bound">E</a> <a id="969" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="971" href="Scoped.LetBind.html#944" class="Bound">k</a><a id="972" class="Symbol">)</a> <a id="974" class="Symbol">(</a><a id="975" href="Scoped.Prog.html#202" class="InductiveConstructor">var</a> <a id="979" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="986" class="Symbol">)</a>
               <a id="1003" class="Symbol">(</a><a id="1004" href="Scoped.LetBind.html#735" class="Postulate">lookupₐ</a> <a id="1012" href="Scoped.LetBind.html#920" class="Bound">E</a> <a id="1014" href="Scoped.LetBind.html#940" class="Bound">x</a><a id="1015" class="Symbol">)</a>
  <a id="1019" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1024" href="Scoped.LetBind.html#1024" class="Bound">E</a> <a id="1026" class="Symbol">(</a><a id="1027" href="Scoped.Prog.html#229" class="InductiveConstructor">op</a> <a id="1030" class="Symbol">(</a><a id="1031" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1036" href="Scoped.LetBind.html#1036" class="Bound">c</a><a id="1037" class="Symbol">)</a> <a id="1039" href="Scoped.LetBind.html#1039" class="Bound">k</a><a id="1040" class="Symbol">)</a> <a id="1042" class="Symbol">=</a> <a id="1044" href="Scoped.Prog.html#229" class="InductiveConstructor">op</a> <a id="1047" href="Scoped.LetBind.html#1036" class="Bound">c</a> <a id="1049" class="Symbol">(</a><a id="1050" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1055" href="Scoped.LetBind.html#1024" class="Bound">E</a> <a id="1057" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1059" href="Scoped.LetBind.html#1039" class="Bound">k</a><a id="1060" class="Symbol">)</a> 
  <a id="1065" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1070" href="Scoped.LetBind.html#1070" class="Bound">E</a> <a id="1072" class="Symbol">(</a><a id="1073" href="Scoped.Prog.html#287" class="InductiveConstructor">scope</a> <a id="1079" class="Symbol">(</a><a id="1080" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1085" class="Symbol">(</a><a id="1086" href="Scoped.LetBind.html#573" class="InductiveConstructor">`letbind</a> <a id="1095" href="Scoped.LetBind.html#1095" class="Bound">n</a> <a id="1097" href="Scoped.LetBind.html#1097" class="Bound">v</a><a id="1098" class="Symbol">))</a> <a id="1101" href="Scoped.LetBind.html#1101" class="Bound">sc</a> <a id="1104" href="Scoped.LetBind.html#1104" class="Bound">k</a><a id="1105" class="Symbol">)</a> <a id="1107" class="Symbol">=</a>
     <a id="1114" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1119" class="Symbol">((</a><a id="1121" href="Scoped.LetBind.html#1095" class="Bound">n</a> <a id="1123" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1125" href="Scoped.LetBind.html#1097" class="Bound">v</a><a id="1126" class="Symbol">)</a> <a id="1128" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1130" href="Scoped.LetBind.html#1070" class="Bound">E</a><a id="1131" class="Symbol">)</a> <a id="1133" class="Symbol">(</a><a id="1134" href="Scoped.LetBind.html#1101" class="Bound">sc</a> <a id="1137" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a><a id="1139" class="Symbol">)</a> <a id="1141" href="Scoped.Prog.html#407" class="Function Operator">&gt;&gt;=</a>
       <a id="1152" href="Data.Maybe.Base.html#1381" class="Function">maybe</a> <a id="1158" class="Symbol">(</a><a id="1159" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1164" href="Scoped.LetBind.html#1070" class="Bound">E</a> <a id="1166" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1168" href="Scoped.LetBind.html#1104" class="Bound">k</a><a id="1169" class="Symbol">)</a> <a id="1171" class="Symbol">(</a><a id="1172" href="Scoped.Prog.html#202" class="InductiveConstructor">var</a> <a id="1176" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="1183" class="Symbol">)</a>
  <a id="1187" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1192" href="Scoped.LetBind.html#1192" class="Bound">E</a> <a id="1194" class="Symbol">(</a><a id="1195" href="Scoped.Prog.html#287" class="InductiveConstructor">scope</a> <a id="1201" class="Symbol">(</a><a id="1202" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1207" href="Scoped.LetBind.html#1207" class="Bound">g</a><a id="1208" class="Symbol">)</a> <a id="1210" href="Scoped.LetBind.html#1210" class="Bound">sc</a> <a id="1213" href="Scoped.LetBind.html#1213" class="Bound">k</a><a id="1214" class="Symbol">)</a> <a id="1216" class="Symbol">=</a>
     <a id="1223" href="Scoped.Prog.html#287" class="InductiveConstructor">scope</a> <a id="1229" href="Scoped.LetBind.html#1207" class="Bound">g</a>  <a id="1232" class="Symbol">(</a><a id="1233" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1238" href="Scoped.LetBind.html#1192" class="Bound">E</a> <a id="1240" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1242" href="Scoped.LetBind.html#1210" class="Bound">sc</a><a id="1244" class="Symbol">)</a> <a id="1246" class="Symbol">(</a><a id="1247" href="Data.Maybe.Base.html#1381" class="Function">maybe</a> <a id="1253" class="Symbol">(</a><a id="1254" href="Scoped.LetBind.html#795" class="Function">hLet</a> <a id="1259" href="Scoped.LetBind.html#1192" class="Bound">E</a> <a id="1261" href="Function.Base.html#1031" class="Function Operator">∘</a> <a id="1263" href="Scoped.LetBind.html#1213" class="Bound">k</a><a id="1264" class="Symbol">)</a> <a id="1266" class="Symbol">(</a><a id="1267" href="Scoped.Prog.html#202" class="InductiveConstructor">var</a> <a id="1271" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="1278" class="Symbol">))</a>
</pre></body></html>